Taskly/
├─ README.md
├─ LICENSE
├─ .gitignore
├─ requirements.txt
└─ taskly.py
# Taskly

Taskly is a small, zero-dependency command-line task manager written in Python.  
Store tasks locally in a simple JSON file. Great for quick personal task lists and learning how to publish a small project on GitHub.

## Features
- Add tasks with optional due date and priority
- List tasks (pending and completed)
- Mark tasks as done
- Remove tasks
- Simple JSON storage (`tasks.json`)

## Requirements
- Python 3.8+

## Installation
Clone the repository and (optionally) create a virtual environment:

```bash
git clone https://github.com/<your-username>/Taskly.git
cd Taskly
python -m venv venv   # optional
source venv/bin/activate  # macOS/Linux
venv\Scripts\activate      # Windows
pip install -r requirements.txt  # (none required by default)
# show help
python taskly.py --help

# add a task
python taskly.py add "Buy groceries" --due 2025-12-20 --priority medium

# list tasks
python taskly.py list

# mark task as done (by id)
python taskly.py done 1

# remove task
python taskly.py remove 2

---

# LICENSE (MIT)
```text
MIT License

Copyright (c) 2025 <Your Name>

Permission is hereby granted, free of charge, to any person obtaining a copy
... (standard MIT text — replace <Your Name> and year as needed) ...
__pycache__/
*.py[cod]
.venv/
venv/
.env
tasks.json
# no external dependencies for basic functionality
v#!/usr/bin/env python3
"""
Taskly - simple CLI task manager
Usage: python taskly.py <command> [options]
Commands:
  add "Task title" [--due YYYY-MM-DD] [--priority low|medium|high]
  list [--all]
  done <id>
  remove <id>
  clear
"""
import argparse
import json
import sys
from datetime import datetime
from pathlib import Path
from typing import List, Dict, Any

DB_PATH = Path("tasks.json")

def load_tasks() -> List[Dict[str, Any]]:
    if not DB_PATH.exists():
        return []
    try:
        with DB_PATH.open("r", encoding="utf-8") as f:
            return json.load(f)
    except Exception:
        return []

def save_tasks(tasks: List[Dict[str, Any]]) -> None:
    with DB_PATH.open("w", encoding="utf-8") as f:
        json.dump(tasks, f, ensure_ascii=False, indent=2)

def next_id(tasks: List[Dict[str, Any]]) -> int:
    if not tasks:
        return 1
    return max(t["id"] for t in tasks) + 1

def cmd_add(args):
    tasks = load_tasks()
    tid = next_id(tasks)
    task = {
        "id": tid,
        "title": args.title,
        "created": datetime.utcnow().isoformat() + "Z",
        "due": args.due if args.due else None,
        "priority": args.priority,
        "done": False,
        "done_at": None
    }
    tasks.append(task)
    save_tasks(tasks)
    print(f"[+] Added task #{tid}: {args.title}")

def format_task(t: Dict[str, Any]) -> str:
    status = "✓" if t["done"] else " "
    due = f" due:{t['due']}" if t.get("due") else ""
    pr = f" pr:{t['priority']}" if t.get("priority") else ""
    return f"[{status}] #{t['id']} {t['title']}{due}{pr}"

def cmd_list(args):
    tasks = load_tasks()
    if not tasks:
        print("No tasks yet.")
        return
    # optionally filter
    if not args.all:
        tasks = [t for t in tasks if not t.get("done")]
    if not tasks:
        print("No matching tasks.")
        return
    tasks_sorted = sorted(tasks, key=lambda x: (x.get("done"), x.get("priority") or "", x.get("due") or ""))
    for t in tasks_sorted:
        print(format_task(t))

def cmd_done(args):
    tasks = load_tasks()
    for t in tasks:
        if t["id"] == args.id:
            if t.get("done"):
                print(f"Task #{args.id} is already done.")
            else:
                t["done"] = True
                t["done_at"] = datetime.utcnow().isoformat() + "Z"
                save_tasks(tasks)
                print(f"[✓] Marked task #{args.id} done.")
            return
    print(f"No task with id {args.id}")

def cmd_remove(args):
    tasks = load_tasks()
    new = [t for t in tasks if t["id"] != args.id]
    if len(new) == len(tasks):
        print(f"No task with id {args.id}")
        return
    save_tasks(new)
    print(f"Removed task #{args.id}")

def cmd_clear(args):
    save_tasks([])
    print("All tasks cleared. (tasks.json overwritten)")

def main(argv=None):
    parser = argparse.ArgumentParser(prog="taskly", description="Taskly - simple CLI task manager")
    sub = parser.add_subparsers(dest="cmd")

    p_add = sub.add_parser("add", help="Add a new task")
    p_add.add_argument("title", type=str, help="Task title")
    p_add.add_argument("--due", type=str, help="Due date YYYY-MM-DD", default=None)
    p_add.add_argument("--priority", choices=["low", "medium", "high"], default="medium")
    p_add.set_defaults(func=cmd_add)

    p_list = sub.add_parser("list", help="List tasks")
    p_list.add_argument("--all", action="store_true", help="Show completed tasks as well")
    p_list.set_defaults(func=cmd_list)

    p_done = sub.add_parser("done", help="Mark a task done by id")
    p_done.add_argument("id", type=int, help="Task id")
    p_done.set_defaults(func=cmd_done)

    p_remove = sub.add_parser("remove", help="Remove a task by id")
    p_remove.add_argument("id", type=int, help="Task id")
    p_remove.set_defaults(func=cmd_remove)

    p_clear = sub.add_parser("clear", help="Clear all tasks")
    p_clear.set_defaults(func=cmd_clear)

    args = parser.parse_args(argv)
    if not hasattr(args, "func"):
        parser.print_help()
        return
    args.func(args)

if __name__ == "__main__":
    main()
